* ### 소개 : 부산가게찾기 api서버  

##

- **1. 프로젝트 설명**

  부산광역시_착한가격업소 API ([https://www.data.go.kr/data/15004512/openapi.do](https://www.data.go.kr/data/15004512/openapi.do))를 활용하였습니다.


  **busan-server**는 사용자에게 부산가게(미용실, 음식점..)에 대한 정보를 제공합니다.
    
  사용자가 요청이 보낼때마다 **open-api-server**에 요청하여  
     
  정보와 함께 적합한 응답을 보냅니다.   
    
  **인증로직 + 비즈니스로직**을 하나의 서버에서 모두 처리하였습니다.


- **2. 전과의 차이점**
  
  약 두달전쯤 진행한 project에서는    
    
  프레임워크를 활용한 게시판의 전반적인 기능구현에 초점을 두었습니다. (댓글, 게시글, 이미지업로드, 좋아요기능, 회원기능...)  
    
  비즈니스에 초점을 두다보니 "5xx"응답을 사용자에게 보여주고  
    
  프레임워크에서 던지는 몇백줄의 예외를 사용자에게 보여주는 단점이 보였습니다.   
    
  이번 프로젝트에서는 사용자의 사용경험, 배포, 예외처리에 도전하였습니다.   

---

**주요모듈 :**  
* Spring-boot  
* Spring-security  
* Spring-jpa  
* Java(11)

**etc :**   
* Spring-mail  
* Swagger2  
* Maven   
* Mysql  
* Redis
* Json Web Token  

**배포환경 :**  
* GCP  
* Docker  
* Docker-hub  
  
**개발환경 :**    
* IntelliJ   
* Postman    
* MAC OS(BIG SUR)    
* pc내장 터미널  


- **Swagger-url**
  
  http://34.127.7.169/swagger-ui/  
   
- **ERD**

<img width="380" alt="스크린샷 2021-12-08 오전 11 46 59" src="https://user-images.githubusercontent.com/80996897/145139509-5cc889f9-b0f9-4390-b29c-d67dcbda9521.png">

- **End Point**  
<img width="700" alt="스크린샷 2021-12-08 오후 12 19 45" src="https://user-images.githubusercontent.com/80996897/145142547-c321e7d7-f7ed-4cc0-9a9a-9a212cbda63e.png">

- **URL 설명**
    
  
   + url에 대한 자세한 설명은 블로그로 : https://dogg.tistory.com/131
 
 
    
       
          

- **주된 기능**
   
  1. openAPI와 연결    
  2. JWT를 활용한 토큰기반인증 처리
  3. 가게즐겨찾기 + 회원CRUD
  4. 로그아웃, 엑세스토큰 재발급시 기존토큰 정지처리, redis활용
  5. 메일인증 기능
  6. 예외처리
  7. Docker, GCP를 이용한 배포  
  + 기능에 대한 설명은 블로그에 추가중입니다 : https://dogg.tistory.com/132  
  
- **개발중 이슈**

  1. 가게리스트조회 요청시 사용자가 추가한 옵션을 포함하여 요청URL만들기    
  2. openAPI에서 응답받은 json데이터를 가공하여 javaObject로 만들기  
  3. JPA이용하며 Etity끼리 양방향참조시 순환참조 문제   
  4. 시큐리티영역에서 던지는 예외를 잡아내기  
  5. 빈주입시기와 자바생성자호출의 순서  
  6. JPA에서 던지는 예외 처리하기  
  7. 시큐리티 필터의 순서, 권한검사필터와 토큰검사필터  
  8. 2개이상의 테스트환경이 생길시 프로젝트설정세팅하기  
  9. 처음사용해보는 docker, 배포  
  + 이슈내용 정리는 블로그에 추가중입니다 : https://dogg.tistory.com/133
       
- **아쉬웠던 점**  
  1. 코드를 작성하며 공부하며 수정이된 부분이 많아서  
     코드가 정리가 안된점이 많이 아쉽습니다.  
  2. 한 서버에서 웹의 앞단과 뒷단을 직접 작성한 경험이 대부분이여서  
     어느정도까지 예외상황을 만들어야할지 고민이 많이 되었습니다.   
     프론트서버와 백엔드서버를 나누어 각자올리는 경험이 생기면 이부분이 해소될것 같습니다.   
  3. docker에 이미지를 올려 배포하는데 자동화가 안되어있어서  
    피로감이 많았던 기억입니다. 쿠버네티스같은 툴을 도입하겠습니다.
  4. 배포되었지만 혼자서 테스트하며 요청, 응답을 주고받아도  
    이틀에 546원이 나왔습니다. 로직상에서 요금을 더 줄일수 없을까 고민이 됩니다.   
  5. 배포를 하며 네트워크지식이 부족하다고 느꼈습니다.   
  6. 프레임워크만큼 언어와 db를 잘다루어야겠다고 느꼈습니다.      
    'simple-json'라이브사용에서의 문제점을 cs기초지식을 활용하여 해결하며 생각했습니다.
